
import {getRequestConfig} from 'next-intl/server';
import {notFound} from 'next/navigation';

// Can be imported from a shared config
export const locales = ['en', 'zh'];
export const defaultLocale = 'en';

// Hardcoded messages for testing
const messagesData = {
  en: {
    LoginPage: {
      title: "MediAdmin Login",
      description: "Enter your credentials to access the admin panel",
      emailLabel: "Email",
      emailPlaceholder: "admin@medadmin.com",
      passwordLabel: "Password",
      passwordPlaceholder: "password",
      loginButton: "Login",
      loggingInButton: "Logging In...",
      copyright: "Â© {year} MediAdmin. All rights reserved."
    },
    UserNav: {
      profile: "Profile",
      settings: "Settings",
      support: "Support",
      logout: "Log out"
    },
    AppLayout: {
      dashboard: "Dashboard",
      userManagement: "User Management",
      videoManagement: "Video Management",
      analysisManagement: "Analysis Management",
      loadingApp: "Loading MediAdmin..."
    },
    DashboardPage: {
      title: "Dashboard",
      totalDoctors: "Total Doctors",
      totalDoctorsDesc: "Number of active doctors",
      totalPatients: "Total Patients",
      totalPatientsDesc: "Registered patients in system",
      uploadedVideos: "Uploaded Videos",
      uploadedVideosDesc: "Consultation videos",
      dataAnalyses: "Data Analyses",
      dataAnalysesDesc: "Analyses performed",
      analysisTrendsTitle: "Data Analysis Trends",
      analysisTrendsDesc: "Number of data analyses per day over the last few months.",
      noData: "No dashboard data available.",
      errorLoading: "Error Loading Dashboard",
      retry: "Retry",
      loading: "Loading dashboard...",
      noTrendData: "No analysis trend data available."
    },
    UserManagementPage: {
      title: "User Management",
      doctorsTab: "Doctors",
      patientsTab: "Patients",
      searchDoctorsPlaceholder: "Search doctors...",
      addDoctorButton: "Add Doctor",
      searchPatientsPlaceholder: "Search patients...",
      addPatientButton: "Add Patient",
      showingPatientsForDoctor: "Showing patients for Dr. {doctorName}.",
      showAllPatients: "Show All Patients",
      loadingUserData: "Loading user data...",
      errorLoadingData: "Error Loading Data",
      confirmDeleteDoctorTitle: "Are you sure?",
      confirmDeleteDoctorDescription: "This action cannot be undone. This will permanently delete Dr. {doctorName}. {reassignMessage}",
      reassignPatientsMessage: "Patients will be reassigned to Dr. {assignDoctorName}.",
      noOtherDoctorToReassign: "This doctor has patients and there are no other doctors to reassign them to.",
      cannotDeleteDoctor: "Cannot Delete Doctor",
      confirmDeletePatientTitle: "Are you sure?",
      confirmDeletePatientDescription: "This action cannot be undone. This will permanently delete patient {patientName}."
    },
    DoctorFormDialog: {
      addTitle: "Add New Doctor",
      editTitle: "Edit Doctor",
      addDescription: "Enter the details for the new doctor.",
      editDescription: "Update the details for this doctor.",
      usernameLabel: "Username",
      usernamePlaceholder: "drjohn",
      emailLabel: "Email",
      emailPlaceholder: "john.doe@example.com",
      passwordLabel: "Password",
      passwordPlaceholderNew: "Enter password",
      passwordPlaceholderEdit: "Leave blank to keep current",
      passwordDescriptionNew: "Password must be at least 6 characters.",
      passwordDescriptionEdit: "Leave blank to keep the current password. New password must be at least 6 characters.",
      phoneLabel: "Phone",
      phonePlaceholder: "555-123-4567",
      departmentLabel: "Department",
      departmentPlaceholder: "Cardiology",
      roleLabel: "Role",
      selectRolePlaceholder: "Select role",
      roleNone: "None",
      roleAdmin: "Admin",
      roleDoctor: "Doctor",
      notesLabel: "Notes",
      notesPlaceholder: "Optional notes about the doctor...",
      addButton: "Add Doctor",
      saveButton: "Save Changes"
    },
    PatientFormDialog: {
      addTitle: "Add New Patient",
      editTitle: "Edit Patient",
      addDescription: "Enter the details for the new patient.",
      editDescription: "Update the details for this patient.",
      nameLabel: "Patient Name",
      namePlaceholder: "Jane Roe",
      ageLabel: "Age",
      agePlaceholder: "30",
      genderLabel: "Gender",
      selectGenderPlaceholder: "Select gender",
      genderMale: "Male",
      genderFemale: "Female",
      genderOther: "Other",
      caseIdLabel: "Case ID / Medical Record Number",
      caseIdPlaceholder: "MRN12345",
      doctorLabel: "Attending Doctor",
      selectDoctorPlaceholder: "Select doctor",
      doctorNone: "None",
      notesLabel: "Notes",
      notesPlaceholder: "Optional notes about the patient...",
      addButton: "Add Patient",
      saveButton: "Save Changes",
      noDoctorsAvailable: "No doctors available"
    },
    DoctorsTable: {
      username: "Username",
      email: "Email",
      phone: "Phone",
      department: "Department",
      patientCount: "Patient Count",
      role: "Role",
      notes: "Notes",
      actions: "Actions",
      noDoctorsFound: "No doctors found.",
      edit: "Edit",
      delete: "Delete",
      openMenu: "Open menu"
    },
    PatientsTable: {
      name: "Name",
      age: "Age",
      gender: "Gender",
      caseId: "Case ID / MRN",
      attendingDoctor: "Attending Doctor",
      notes: "Notes",
      videoCount: "Video Count",
      analysisCount: "Analysis Count",
      actions: "Actions",
      noPatientsFound: "No patients found.",
      edit: "Edit",
      delete: "Delete",
      openMenu: "Open menu",
      notApplicable: "N/A"
    },
    VideosPage: {
      title: "Video Management",
      searchPlaceholder: "Search videos...",
      showingVideosForPatient": "Showing videos for patient: {patientName} (Case ID: {caseId}).",
      showAllVideos: "Show All Videos",
      loadingVideoData": "Loading video data...",
      errorLoadingVideos": "Error Loading Videos",
      confirmDeleteVideoTitle": "Are you sure?",
      confirmDeleteVideoDescription": "This action will mark the video as deleted. Associated analyses might also be affected.",
      videoDeletedToast": "Video Deleted",
      videoDeletedDesc": "Video has been deleted."
    },
    VideosTable: {
      thumbnail: "Thumbnail",
      videoInfo: "Video Info",
      patient: "Patient",
      uploadDate": "Upload Date",
      analysisId": "Analysis ID",
      actions: "Actions",
      noVideosFound": "No videos found.",
      playVideo": "Play Video",
      viewRawVideo": "View Raw Video",
      delete: "Delete",
      videoTypeOriginal": "Original",
      videoTypeAnalysis": "Analysis",
      videoTypeUnknown": "Unknown",
      openMenu": "Open menu",
      notApplicable": "N/A"
    },
    VideoPlayerModal": {
      title: "Video Player",
      close": "Close"
    },
    AnalysesPage": {
      title: "Analysis Management",
      searchPlaceholder": "Search analyses...",
      showingAnalysesForPatient": "Showing analyses for patient: {patientName}.",
      showingAnalysesForVideo": "Showing analyses for video: {videoName}.",
      showingDetailsForAnalysis": "Showing details for Analysis ID: {analysisId}.",
      showingAnalysesWithParent": "Showing analyses with Parent ID: {parentId}.",
      showAllAnalyses": "Show All Analyses",
      loadingAnalysisData": "Loading analysis data...",
      errorLoadingAnalyses": "Error Loading Analyses",
      confirmDeleteAnalysisTitle": "Are you sure?",
      confirmDeleteAnalysisDescription": "This action will mark the analysis (Action ID: {analysisId}) as deleted. This may also affect associated inference videos.",
      analysisDeletedToast": "Analysis Deleted",
      analysisDeletedDesc": "Analysis {analysisId} has been deleted."
    },
    AnalysesTable: {
      analysisId": "Analysis ID",
      parentId": "Parent ID",
      patient: "Patient",
      originalVideo": "Original Video",
      status: "Status",
      progress": "Progress",
      createdDate": "Created Date",
      actions": "Actions",
      noAnalysesFound": "No analyses found.",
      viewDetails": "View Details",
      viewProcessedVideo": "View Processed Video",
      delete: "Delete",
      openMenu": "Open menu",
      notApplicable": "N/A"
    },
    ToastMessages: {
      error: "Error",
      loginSuccessTitle": "Login Successful",
      loginSuccessDesc": "Welcome back!",
      loginFailedTitle": "Login Failed",
      loginFailedDesc": "Invalid email or password.",
      doctorAddedTitle": "Doctor Added",
      doctorUpdatedTitle": "Doctor Updated",
      doctorSaveSuccessDesc": "{doctorName} has been saved successfully.",
      doctorDeletedTitle": "Doctor Deleted",
      doctorDeletedDesc": "Doctor has been deleted.",
      patientAddedTitle": "Patient Added",
      patientUpdatedTitle": "Patient Updated",
      patientSaveSuccessDesc": "{patientName} has been saved successfully.",
      patientDeletedTitle": "Patient Deleted",
      patientDeletedDesc": "Patient has been deleted.",
      fetchAnalysesError": "Could not fetch analyses.",
      fetchVideosError": "Could not fetch videos.",
      fetchPatientsError": "Could not fetch patients.",
      fetchDoctorsError": "Could not fetch doctors.",
      fetchDashboardError": "Error Fetching Dashboard Data",
      saveDoctorError": "Failed to save doctor: {statusText}",
      savePatientError": "Failed to save patient: {statusText}",
      deleteDoctorError": "Failed to delete doctor: {statusText}",
      deletePatientError": "Failed to delete patient: {statusText}",
      deleteVideoError": "Failed to delete video: {statusText}",
      deleteAnalysisError": "Failed to delete analysis: {statusText}"
    },
    Common: {
      retry": "Retry",
      cancel": "Cancel",
      delete: "Delete",
      notApplicable": "N/A",
      saveChanges": "Save Changes"
    }
  },
  zh: {
    LoginPage: {
      title: "å»çç®¡çåå°",
      description: "è¾å¥æ¨çå­æ®ä»¥è®¿é®ç®¡çé¢æ¿",
      emailLabel: "é®ç®±",
      emailPlaceholder: "admin@medadmin.com",
      passwordLabel: "å¯ç ",
      passwordPlaceholder: "å¯ç ",
      loginButton: "ç»å½",
      loggingInButton: "ç»å½ä¸­...",
      copyright: "Â© {year} MediAdmin. çæææã"
    },
    UserNav: {
      profile: "ä¸ªäººèµæ",
      settings: "è®¾ç½®",
      support: "æ¯æ",
      logout: "ç»åº"
    },
    AppLayout: {
      dashboard: "ä»ªè¡¨ç",
      userManagement: "ç¨æ·ç®¡ç",
      videoManagement: "è§é¢ç®¡ç",
      analysisManagement: "åæç®¡ç",
      loadingApp: "æ­£å¨å è½½ MediAdmin..."
    },
    DashboardPage: {
      title: "ä»ªè¡¨ç",
      totalDoctors: "å»çæ»æ°",
      totalDoctorsDesc: "æ´»è·å»çæ°é",
      totalPatients: "æ£èæ»æ°",
      totalPatientsDesc: "ç³»ç»ä¸­æ³¨åçæ£è",
      uploadedVideos: "å·²ä¸ä¼ è§é¢",
      uploadedVideosDesc: "ä¼è¯è§é¢",
      dataAnalyses: "æ°æ®åæ",
      dataAnalysesDesc: "å·²æ§è¡çåæ",
      analysisTrendsTitle": "æ°æ®åæè¶å¿",
      analysisTrendsDesc": "è¿å»å ä¸ªææ¯æ¥æ°æ®åææ°éã",
      noData: "æ ä»ªè¡¨çæ°æ®ã",
      errorLoading: "å è½½ä»ªè¡¨çæ¶åºé",
      retry: "éè¯",
      loading: "æ­£å¨å è½½ä»ªè¡¨ç...",
      noTrendData": "æ åæè¶å¿æ°æ®ã"
    },
    UserManagementPage: {
      title: "ç¨æ·ç®¡ç",
      doctorsTab: "å»ç",
      patientsTab: "æ£è",
      searchDoctorsPlaceholder: "æç´¢å»ç...",
      addDoctorButton: "æ·»å å»ç",
      searchPatientsPlaceholder: "æç´¢æ£è...",
      addPatientButton: "æ·»å æ£è",
      showingPatientsForDoctor: "æ¾ç¤º {doctorName}å»ççæ£èã",
      showAllPatients: "æ¾ç¤ºæææ£è",
      loadingUserData": "æ­£å¨å è½½ç¨æ·æ°æ®...",
      errorLoadingData": "å è½½æ°æ®æ¶åºé",
      confirmDeleteDoctorTitle": "æ¨ç¡®å®åï¼",
      confirmDeleteDoctorDescription": "æ­¤æä½æ æ³æ¤éãè¿å°æ°¸ä¹å é¤{doctorName}å»çã{reassignMessage}",
      reassignPatientsMessage": "æ£èå°è¢«éæ°åéç»{assignDoctorName}å»çã",
      noOtherDoctorToReassign": "è¯¥å»çåä¸ææ£èï¼å¹¶ä¸æ²¡æå¶ä»å»çå¯ä»¥éæ°åéä»ä»¬ã",
      cannotDeleteDoctor": "æ æ³å é¤å»ç",
      confirmDeletePatientTitle": "æ¨ç¡®å®åï¼",
      confirmDeletePatientDescription": "æ­¤æä½æ æ³æ¤éãè¿å°æ°¸ä¹å é¤æ£è{patientName}ã"
    },
    DoctorFormDialog: {
      addTitle: "æ·»å æ°å»ç",
      editTitle: "ç¼è¾å»ç",
      addDescription: "è¾å¥æ°å»ççè¯¦ç»ä¿¡æ¯ã",
      editDescription: "æ´æ°æ­¤å»ççè¯¦ç»ä¿¡æ¯ã",
      usernameLabel: "ç¨æ·å",
      usernamePlaceholder: "å¼ å»ç",
      emailLabel: "é®ç®±",
      emailPlaceholder: "zhang.san@example.com",
      passwordLabel: "å¯ç ",
      passwordPlaceholderNew: "è¾å¥å¯ç ",
      passwordPlaceholderEdit: "çç©ºä»¥ä¿æå½åå¯ç ",
      passwordDescriptionNew: "å¯ç å¿é¡»è³å°ä¸º6ä¸ªå­ç¬¦ã",
      passwordDescriptionEdit: "çç©ºä»¥ä¿æå½åå¯ç ãæ°å¯ç å¿é¡»è³å°ä¸º6ä¸ªå­ç¬¦ã",
      phoneLabel: "çµè¯",
      phonePlaceholder: "13800138000",
      departmentLabel: "ç§å®¤",
      departmentPlaceholder: "å¿èç§",
      roleLabel: "è§è²",
      selectRolePlaceholder: "éæ©è§è²",
      roleNone: "æ ",
      roleAdmin: "ç®¡çå",
      roleDoctor: "å»ç",
      notesLabel: "å¤æ³¨",
      notesPlaceholder: "å³äºå»ççå¯éå¤æ³¨...",
      addButton: "æ·»å å»ç",
      saveButton": "ä¿å­æ´æ¹"
    },
    PatientFormDialog: {
      addTitle: "æ·»å æ°æ£è",
      editTitle: "ç¼è¾æ£è",
      addDescription: "è¾å¥æ°æ£èçè¯¦ç»ä¿¡æ¯ã",
      editDescription: "æ´æ°æ­¤æ£èçè¯¦ç»ä¿¡æ¯ã",
      nameLabel: "æ£èå§å",
      namePlaceholder: "æå",
      ageLabel: "å¹´é¾",
      agePlaceholder: "30",
      genderLabel: "æ§å«",
      selectGenderPlaceholder: "éæ©æ§å«",
      genderMale: "ç·æ§",
      genderFemale: "å¥³æ§",
      genderOther: "å¶ä»",
      caseIdLabel: "çä¾å· / çåå·",
      caseIdPlaceholder: "MRN12345",
      doctorLabel: "ä¸»æ²»å»ç",
      selectDoctorPlaceholder: "éæ©å»ç",
      doctorNone: "æ ",
      notesLabel: "å¤æ³¨",
      notesPlaceholder: "å³äºæ£èçå¯éå¤æ³¨...",
      addButton: "æ·»å æ£è",
      saveButton: "ä¿å­æ´æ¹",
      noDoctorsAvailable": "ææ å»çå¯é"
    },
    DoctorsTable: {
      username: "ç¨æ·å",
      email: "é®ç®±",
      phone: "çµè¯",
      department: "ç§å®¤",
      patientCount: "æ£èæ°é",
      role: "è§è²",
      notes: "å¤æ³¨",
      actions: "æä½",
      noDoctorsFound: "æªæ¾å°å»çã",
      edit: "ç¼è¾",
      delete: "å é¤",
      openMenu: "æå¼èå"
    },
    PatientsTable: {
      name: "å§å",
      age: "å¹´é¾",
      gender: "æ§å«",
      caseId: "çä¾å· / çåå·",
      attendingDoctor: "ä¸»æ²»å»ç",
      notes: "å¤æ³¨",
      videoCount: "è§é¢æ°é",
      analysisCount: "åææ°é",
      actions: "æä½",
      noPatientsFound: "æªæ¾å°æ£èã",
      edit: "ç¼è¾",
      delete: "å é¤",
      openMenu: "æå¼èå",
      notApplicable": "ä¸éç¨"
    },
    VideosPage: {
      title: "è§é¢ç®¡ç",
      searchPlaceholder: "æç´¢è§é¢...",
      showingVideosForPatient": "æ¾ç¤ºæ£è {patientName} (çä¾å·: {caseId}) çè§é¢ã",
      showAllVideos: "æ¾ç¤ºææè§é¢",
      loadingVideoData": "æ­£å¨å è½½è§é¢æ°æ®...",
      errorLoadingVideos": "å è½½è§é¢æ¶åºé",
      confirmDeleteVideoTitle": "æ¨ç¡®å®åï¼",
      confirmDeleteVideoDescription": "æ­¤æä½ä¼å°è§é¢æ è®°ä¸ºå·²å é¤ãç¸å³çåæå¯è½ä¹ä¼åå°å½±åã",
      videoDeletedToast": "è§é¢å·²å é¤",
      videoDeletedDesc": "è§é¢å·²è¢«å é¤ã"
    },
    VideosTable: {
      thumbnail: "ç¼©ç¥å¾",
      videoInfo: "è§é¢ä¿¡æ¯",
      patient: "æ£è",
      uploadDate": "ä¸ä¼ æ¥æ",
      analysisId": "åæID",
      actions: "æä½",
      noVideosFound": "æªæ¾å°è§é¢ã",
      playVideo": "æ­æ¾è§é¢",
      viewRawVideo": "æ¥çåå§è§é¢",
      delete: "å é¤",
      videoTypeOriginal": "åå§è§é¢",
      videoTypeAnalysis": "åæè§é¢",
      videoTypeUnknown": "æªç¥",
      openMenu": "æå¼èå",
      notApplicable": "ä¸éç¨"
    },
    VideoPlayerModal: {
      title: "è§é¢æ­æ¾å¨",
      close": "å³é­"
    },
    AnalysesPage: {
      title: "åæç®¡ç",
      searchPlaceholder": "æç´¢åæ...",
      showingAnalysesForPatient": "æ¾ç¤ºæ£è {patientName} çåæã",
      showingAnalysesForVideo": "æ¾ç¤ºè§é¢ {videoName} çåæã",
      showingDetailsForAnalysis": "æ¾ç¤ºåæID {analysisId} çè¯¦æã",
      showingAnalysesWithParent": "æ¾ç¤ºç¶IDä¸º {parentId} çåæã",
      showAllAnalyses": "æ¾ç¤ºææåæ",
      loadingAnalysisData": "æ­£å¨å è½½åææ°æ®...",
      errorLoadingAnalyses": "å è½½åææ¶åºé",
      confirmDeleteAnalysisTitle": "æ¨ç¡®å®åï¼",
      confirmDeleteAnalysisDescription": "æ­¤æä½ä¼å°åæï¼æä½IDï¼{analysisId}ï¼æ è®°ä¸ºå·²å é¤ãè¿å¯è½ä¹ä¼å½±åç¸å³çæ¨çè§é¢ã",
      analysisDeletedToast": "åæå·²å é¤",
      analysisDeletedDesc": "åæ {analysisId} å·²è¢«å é¤ã"
    },
    AnalysesTable: {
      analysisId": "åæID",
      parentId": "ç¶ID",
      patient: "æ£è",
      originalVideo": "åå§è§é¢",
      status: "ç¶æ",
      progress": "è¿åº¦",
      createdDate": "åå»ºæ¥æ",
      actions: "æä½",
      noAnalysesFound": "æªæ¾å°åæã",
      viewDetails": "æ¥çè¯¦æ",
      viewProcessedVideo": "æ¥çå¤çåè§é¢",
      delete: "å é¤",
      openMenu: "æå¼èå",
      notApplicable": "ä¸éç¨"
    },
    ToastMessages: {
      error: "éè¯¯",
      loginSuccessTitle": "ç»å½æå",
      loginSuccessDesc": "æ¬¢è¿åæ¥ï¼",
      loginFailedTitle": "ç»å½å¤±è´¥",
      loginFailedDesc": "é®ç®±æå¯ç æ æã",
      doctorAddedTitle": "å»çå·²æ·»å ",
      doctorUpdatedTitle": "å»çå·²æ´æ°",
      doctorSaveSuccessDesc": "{doctorName} å·²æåä¿å­ã",
      doctorDeletedTitle": "å»çå·²å é¤",
      doctorDeletedDesc": "å»çå·²è¢«å é¤ã",
      patientAddedTitle": "æ£èå·²æ·»å ",
      patientUpdatedTitle": "æ£èå·²æ´æ°",
      patientSaveSuccessDesc": "{patientName} å·²æåä¿å­ã",
      patientDeletedTitle": "æ£èå·²å é¤",
      patientDeletedDesc": "æ£èå·²è¢«å é¤ã",
      fetchAnalysesError": "æ æ³è·ååææ°æ®ã",
      fetchVideosError": "æ æ³è·åè§é¢æ°æ®ã",
      fetchPatientsError": "æ æ³è·åæ£èæ°æ®ã",
      fetchDoctorsError": "æ æ³è·åå»çæ°æ®ã",
      fetchDashboardError": "è·åä»ªè¡¨çæ°æ®æ¶åºé",
      saveDoctorError": "ä¿å­å»çå¤±è´¥ï¼{statusText}",
      savePatientError": "ä¿å­æ£èå¤±è´¥ï¼{statusText}",
      deleteDoctorError": "å é¤å»çå¤±è´¥ï¼{statusText}",
      deletePatientError": "å é¤æ£èå¤±è´¥ï¼{statusText}",
      deleteVideoError": "å é¤è§é¢å¤±è´¥ï¼{statusText}",
      deleteAnalysisError": "å é¤åæå¤±è´¥ï¼{statusText}"
    },
    Common: {
      retry: "éè¯",
      cancel: "åæ¶",
      delete: "å é¤",
      notApplicable": "ä¸éç¨",
      saveChanges": "ä¿å­æ´æ¹"
    }
  }
};

export default getRequestConfig(async ({locale}) => {
  // Validate that the incoming `locale` parameter is valid
  const isValidLocale = locales.includes(locale as any);
  if (!isValidLocale) {
    console.error(`[i18n.ts] Invalid locale detected: "${locale}". Expected one of: ${locales.join(', ')}. Calling notFound().`);
    notFound();
  }

  // @ts-ignore
  const localeMessages = messagesData[locale] || messagesData[defaultLocale];

  if (!localeMessages) {
    console.error(`[i18n.ts] No messages found for locale: ${locale} or defaultLocale ${defaultLocale}. This indicates an issue in i18n.ts. Calling notFound().`);
    notFound();
  }
  
  return {
    messages: localeMessages
  };
});

